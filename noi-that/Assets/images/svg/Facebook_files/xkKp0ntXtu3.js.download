if (self.CavalryLogger) { CavalryLogger.start_js(["whkuX"]); }

__d("MercuryAttachmentError.react",["fbt","React","XUINotice.react","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("XUINotice.react"),{use:"warn",children:h.jsx(b("XUIText.react"),{size:"meta1",children:g._("Kh\u00f4ng th\u1ec3 t\u1ea3i t\u1ec7p \u0111\u00ednh k\u00e8m n\u00e0y.")})})};return c}(h.Component);e.exports=a}),null);
__d("MercuryAttachmentFile.react",["cx","fbt","ix","Image.react","LeftRight.react","Link.react","MercuryAttachment","React","URI","isLinkshimURI","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};d.$1=function(){if(b("isLinkshimURI")(new(j||(j=b("URI")))(this.props.url)))return this.props.url;else return{url:(this.props.url||"").toString(),shimhash:this.props.shimhash}};d.$2=function(){return this.props.open_url?k.jsxs("div",{className:"_59gs",children:[k.jsx(b("Link.react"),{target:"_blank",href:this.props.open_url,children:h._("m\u1edf")})," ","\xb7"," ",k.jsx(b("Link.react"),{href:this.$1(),s:this.props.isSafeToSkipShim?"1":"",children:h._("t\u1ea3i xu\u1ed1ng")})]}):k.jsx("div",{})};d.render=function(){var a=b("joinClasses")(b("MercuryAttachment").getAttachIconClass(this.props.type),"_59go _59gq");return this.props.url?k.jsxs(b("LeftRight.react"),{className:a,children:[k.jsx(b("Link.react"),babelHelpers["extends"]({href:this.$1(),s:this.props.isSafeToSkipShim?"1":""},this.$3(),{children:k.jsxs(b("LeftRight.react"),{children:[k.jsx(b("Image.react"),{src:i("86988")}),k.jsx("span",{className:"_59gp",children:this.props.name})]})})),this.$2()]}):k.jsxs(b("LeftRight.react"),{className:a,children:[k.jsx(b("Image.react"),{src:i("86988")}),k.jsx("span",{className:"_59gp",children:this.props.name})]})};d.$3=function(){return b("isLinkshimURI")(new(j||(j=b("URI")))(this.props.url))?{target:"_blank"}:{}};return c}(k.PureComponent);a.propTypes={isSafeToSkipShim:(c=b("prop-types")).bool,name:c.string.isRequired,onAttachmentLoad:c.func,open_url:c.string,rel:c.string,shimhash:c.string,type:c.string.isRequired,url:c.string};e.exports=a}),null);
__d("MercuryAttachmentMalicious.react",["fbt","React","XUINotice.react","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("XUINotice.react"),{use:"warn",children:h.jsx(b("XUIText.react"),{size:"meta1",children:g._("T\u1ec7p \u0111\u00ednh k\u00e8m n\u00e0y \u0111\u00e3 b\u1ecb \u0111\u00e1nh d\u1ea5u l\u00e0 \u0111\u1ed9c h\u1ea1i.")})})};return c}(h.Component);e.exports=a}),null);
__d("MercuryAttachmentPhoto.react",["ChatImageArrowDirection","ChatImageWithArrow.react","MercuryAttachmentViewer","MercuryIDs","MessengerBusinessHideImageBootloaded.react","MessengerMessage.bs","React","SphericalPhotoUtils","SpotlightMercurySharedMediaViewer.react","URI","getPageIDFromThreadID","prop-types"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,j=160;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={newSharedPhotosView:!1},d.$1=function(a){var c;a=d.props.image;var e=!0;!d.props.hasAttribution&&d.props.count&&(e=d.props.count===1);var f=d.props.message;f=f.thread_fbid?f.thread_fbid:b("MercuryIDs").getThreadFBIDFromThreadID(f.thread_id);f=new(g||(g=b("URI")))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:f,image_id:a.metadata.fbid});var h="messages:view_all_in_thread";c=(c=a.large_preview_url)!=null?c:a.preview_url;b("MercuryAttachmentViewer").bootstrapWithConfig({dimensions:a.metadata.dimensions,disablePaging:e,endpoint:f,fbid:a.metadata.fbid,setID:h,src:c},null)},d.$2=function(){var a=d.props.image;a&&a.metadata&&d.setState({newSharedPhotosView:a.metadata.fbid})},d.$3=function(){d.setState({newSharedPhotosView:null})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("MercuryAttachmentViewer").preload(),this.props.onAttachmentLoad&&this.props.onAttachmentLoad(this.props.height)};d.$4=function(){var a=this.props.message.thread_fbid||this.props.message.thread_id&&b("MercuryIDs").getThreadFBIDFromThreadID(this.props.message.thread_id);return h.jsx(b("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$3,photoID:String(this.state.newSharedPhotosView),rootClassName:"",threadID:a,disableForward:!1,enableShareToFB:!0})};d.render=function(){var a=b("MessengerMessage.bs").isInbound(this.props.message),c=!!b("getPageIDFromThreadID")(this.props.message.thread_id);c=!this.props.hasAttribution&&!c?this.$2:this.$1;var d=this.state.newSharedPhotosView?this.$4():null,e=this.props.photoEncodings?this.props.photoEncodings.length!==0:!1,f=this.props.image.preview_url;if(e){var g=i(this.props.photoEncodings);g=g.smallThumbnail;f=g||this.props.image.preview_url}return!!b("getPageIDFromThreadID")(this.props.message.thread_id)&&this.props.image.blurred_image_uri!==null&&this.props.image.blurred_image_uri!==void 0?h.jsx(b("MessengerBusinessHideImageBootloaded.react"),{fbid:this.props.image.metadata.fbid,thumbnail:this.props.image.blurred_image_uri,renderSmall:!0}):h.jsxs("div",{onFocus:this.$5,children:[d,h.jsx(b("ChatImageWithArrow.react"),{arrowDirection:a?b("ChatImageArrowDirection").LEFT:b("ChatImageArrowDirection").RIGHT,source:f,height:e?j:this.props.height,width:e?j:this.props.width,onClick:c,round:!!this.props.round,isLoading:!!this.props.image.preview_uploading,isSpherical:e})]})};d.$5=function(a){a.stopPropagation()};return c}(h.Component);a.propTypes={hasAttribution:(c=b("prop-types")).bool,height:c.number,image:c.object.isRequired,photoEncodings:c.array,message:c.object.isRequired,onAttachmentLoad:c.func,round:c.bool,width:c.number};e.exports=a}),null);
__d("ChatGridImageReact.bs",["cx","bs_curry","React","Link.react","bs_belt_Option","bs_caml_option","CssBackgroundImage.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.isLoading,d=a.isSpherical,e=a.metadata,f=a.size,g=a.source,i=a.onClick;a=String(f)+"px";f={height:a,width:a};a=b("bs_belt_Option").getWithDefault(c,!1);if(a||g===void 0)return h.jsx("div",{className:"_4ypb",style:f});else{c=b("bs_belt_Option").getWithDefault(g,"");a=function(a){a=e!==void 0?b("bs_caml_option").valFromOption(e).fbid:"";if(i!==void 0)return b("bs_curry")._1(i,a);else return 0};g=b("bs_belt_Option").getWithDefault(d,!1);d=g?h.jsx("div",{className:"_64ks"}):null;return h.jsx(b("Link.react"),{onClick:a,children:h.jsx(b("CssBackgroundImage.react"),{className:"_332l"+(g?" _3603":""),imageURI:c,backgroundPosition:"center",style:f,children:d})})}}c=a;f.make=c}),null);
__d("ChatGridImageReact.re",["ChatGridImageReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("ChatGridImageReact.bs").make;f.make=a}),null);
__d("MercuryAttachmentPhotoGrid.react",["cx","ChatGridImageReact.re","Grid.react","MercuryAttachmentViewer","MercuryIDs","React","prop-types","SpotlightMercurySharedMediaViewer.react","SphericalPhotoUtils","URI","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("ChatGridImageReact.re").make,j=b("Grid.react").GridItem,k=b("React"),l=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={newSharedPhotosView:null},d.$1=function(a,c){var e=d.props.count,f=d.props.message;f=f.thread_fbid?f.thread_fbid:b("MercuryIDs").getThreadFBIDFromThreadID(f.thread_id);var g=new(h||(h=b("URI")))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:f,image_id:a.metadata&&a.metadata.fbid}),i="messages:view_all_in_thread";return function(d){b("MercuryAttachmentViewer").bootstrapWithConfig({dimensions:a.metadata.dimensions,disablePaging:c||e===1,endpoint:g,fbid:a.metadata.fbid,setID:i,src:a.preview_url},null)}},d.$2=function(a){a&&d.setState({newSharedPhotosView:a})},d.$3=function(){d.setState({newSharedPhotosView:null})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("MercuryAttachmentViewer").preload()};d.$4=function(){var a=this.props.message.thread_fbid||this.props.message.thread_id&&b("MercuryIDs").getThreadFBIDFromThreadID(this.props.message.thread_id);return k.jsx(b("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$3,photoID:String(this.state.newSharedPhotosView),rootClassName:"",threadID:a,disableForward:!1})};d.render=function(){var a=this.props.images,c=a.length;c=c==2||c==4?2:3;var d=Math.floor(this.props.size/c),e=[],f=a.some(function(a){return a.attach_type==="animated_image"}),g=this.state.newSharedPhotosView?this.$4():null,h=!!b("getPageIDFromThreadID")(this.props.message.thread_id);for(var m=0;m<a.length;m++){var n=h?this.$1(a[m],f):this.$2,o=a[m].photo_encodings?a[m].photo_encodings.length!==0:!1,p=a[m].preview_url;if(o){var q=l(a[m].photo_encodings);q=q.smallThumbnail;p=q||p}e.push(k.jsx(j,{children:k.jsx(i,{isLoading:!!a[m].preview_uploading,onClick:n,metadata:a[m].metadata,size:d,source:p,isSpherical:o})},m))}return k.jsxs("div",{children:[g,k.jsx(b("Grid.react"),{cols:c,className:"_5b2w",spacing:"_5b2x",alignh:"right",children:e})]})};return c}(k.Component);a.propTypes={images:(c=b("prop-types")).arrayOf(c.object).isRequired,size:c.number.isRequired,message:c.object.isRequired};e.exports=a}),null);
__d("ChatAttachmentAttribution.react",["cx","ImmutableObject","MercuryAttachmentAttribution.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};d.render=function(){return h.jsx(b("MercuryAttachmentAttribution.react"),{attachment:this.props.attachment,className:"_1ekr _4i_6"})};return c}(h.Component);a.propTypes={attachment:b("prop-types").instanceOf(b("ImmutableObject")),onAttachmentLoad:b("prop-types").func};e.exports=a}),null);
__d("MercuryAttachmentVideo.react",["cx","ix","CenteredContainer.react","ChatAttachmentAttribution.react","ChatImageWithArrow.react","ChatSpeakingSticker.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","ImmutableObject","MercuryAttachment","MercuryAttachmentViewer","MessengerVideoPlayer.react","React","SpotlightMercurySharedMediaViewer.react","Vector","getPageIDFromThreadID","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){var i=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={newSharedPhotosView:null},d.$1=function(){var a=d.props.duration,b=Math.floor(a/60);a=a%60;return a<10?b+":0"+a:b+":"+a},d.openViewer=function(){var a=d.props,c=a.pageID,e=a.videoID,f=a.videoSize;a=a.videoURI;f=new(b("Vector"))(f.width,f.height);b("MercuryAttachmentViewer").renderVideo({pageID:c,videoID:e,videoSize:f,videoURI:a})},d.$2=function(){d.props.videoID&&d.setState({newSharedPhotosView:d.props.videoID})},d.$3=function(){d.setState({newSharedPhotosView:null})},d.$5=function(){if(d.props.isChat)return i.jsxs("div",{children:[i.jsx(b("ChatImageWithArrow.react"),{height:d.props.thumbSize.height,round:!0,source:d.props.thumbnail,width:d.props.thumbSize.width},"previewImage"),i.jsx(b("ChatAttachmentAttribution.react"),{attachment:d.props.attachment},"chatAttribution")]});else return i.jsx(b("Image.react"),{height:d.props.thumbSize.height,width:d.props.thumbSize.width,src:d.props.thumbnail})},d.$6=function(){return d.props.isChat?{}:d.props.thumbSize},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),b("MercuryAttachmentViewer").preload()};d.$4=function(){return i.jsx(b("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$3,photoID:this.state.newSharedPhotosView,rootClassName:"",threadID:this.props.threadFBID,disableForward:!1})};d.$7=function(a,c){return!a.legacy_attachment_id?null:i.jsx(b("MessengerVideoPlayer.react"),{attachment:this.props.attachment,videoData:a,isInThread:!0,isVisible:this.props.isVisible,onClick:c,className:b("joinClasses")(this.props.className,"_n4o _3_om _1wno")})};d.$8=function(a){a=this.props.thumbSize;a={x:a.width,y:a.height};return{legacy_attachment_id:this.props.videoID,original_dimensions:a,start_muted:!0,no_fullscreen:!0,hide_controls_on_finish:!0,url:this.props.videoURI}};d.render=function(){if(this.props.attachment.metadata&&this.props.attachment.metadata.render_as_sticker&&this.props.isChat)return i.jsx(b("ChatSpeakingSticker.react"),{videoURI:this.props.videoURI,videoSize:this.props.videoSize});var a=!!b("getPageIDFromThreadID")(this.props.threadID);a=a?this.openViewer:this.$2;var c=this.state.newSharedPhotosView&&this.props.threadFBID?this.$4():null,d=b("MercuryAttachment").hasAttribution(this.props.attachment),e="clearfix _zow _59go"+(d?" _4yjw":"")+(this.props.isChat?" _3ds5":""),f=this.$8(this.props.attachment);f=this.$7(f,a);f=f?f:i.jsxs(b("FBOverlayContainer.react"),{className:e,onClick:a,style:this.$6(),children:[i.jsx(b("FBOverlayBase.react"),{children:this.$5()}),i.jsx(b("FBOverlayElement.react"),{children:i.jsx("div",{className:(this.props.isChat?"":"_zox")+(d?" _jt3":""),children:i.jsx("span",{className:"_zoz",children:this.$1()})})}),i.jsx(b("FBOverlayElement.react"),{children:i.jsx(b("CenteredContainer.react"),{className:d?"_jt3":"",vertical:!0,children:i.jsx(b("Image.react"),{src:h("27983")})})})]},"overlayContainer");return this.props.isChat?i.jsxs("div",{children:[c,f]}):i.jsxs("div",{children:[c,f,i.jsx(b("ChatAttachmentAttribution.react"),{attachment:this.props.attachment},"inboxAttribution")]})};return c}(i.Component);a.propTypes={attachment:(c=b("prop-types")).instanceOf(b("ImmutableObject")),duration:c.number.isRequired,isChat:c.bool,isVisible:c.bool,threadID:c.string,threadFBID:c.string,name:c.string.isRequired,onAttachmentLoad:c.func,pageID:c.string,thumbSize:c.shape({height:c.number,width:c.number}).isRequired,thumbnail:c.string.isRequired,videoSize:c.shape({height:c.number,width:c.number}).isRequired,videoID:c.string.isRequired,videoURI:c.string.isRequired};e.exports=a}),null);
__d("MercuryAttachmentRenderer",["cx","ChatAttachmentAttribution.react","EmojiSticker.react","ImmutableObject","MercuryAttachment","MercuryAttachmentAudioClip.react","MercuryAttachmentFile.react","MercuryAttachmentLayoutTypeHelper","MercuryAttachmentPhoto.react","MercuryAttachmentPhotoGrid.react","MercuryAttachmentVideo.react","MercuryIDs","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessengerFromViewerUtils","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","Sticker.react","StickerConstants","XStickerAssetController","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=12;a={renderFile:function(a,c,d){return h.jsx(b("MercuryAttachmentFile.react"),{isSafeToSkipShim:a.url_skipshim,name:a.name,onAttachmentLoad:d,open_url:c?null:a.open_url,rel:a.rel,shimhash:a.url_shimhash,type:a.icon_type,url:a.url})},renderAudioClip:function(a,c,d,e,f){var g=a.metadata.duration/1e3,i=b("MercuryShareAttachmentRenderLocations").CHAT,j=100,k=c?160:400,l=100;g>=5&&(l=(1-Math.pow(10,(g-5)/-30))*(k-j)+j);return[h.jsx(b("MercuryAttachmentAudioClip.react"),{customColor:d,duration:a.metadata.duration/1e3,isChat:c,isFromViewer:b("MessengerFromViewerUtils").isFromViewer(e),location:i,onAttachmentLoad:f,rootClassName:b("MercuryAttachment").hasAttribution(a)?"_4yjw":"",showHelp:!1,src:a.url,width:l},"audioClip"),h.jsx(b("ChatAttachmentAttribution.react"),{attachment:new(b("ImmutableObject"))(a),onAttachmentLoad:f},"audioAttribution")]},renderVideo:function(a,c,d,e,f){var g=c?a.metadata.chat_size:a.metadata.inbox_size,i=c?a.metadata.chat_preview:a.metadata.inbox_preview;if(!g||!i)return null;var j=d&&(d.thread_fbid||d.thread_id&&b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id));return h.jsx("div",{children:h.jsx(b("MercuryAttachmentVideo.react"),{attachment:new(b("ImmutableObject"))(a),duration:a.metadata.duration,isChat:c,isVisible:f,threadID:d&&d.thread_id,threadFBID:j,name:a.name,onAttachmentLoad:e,pageID:a.metadata.pageid,thumbSize:g,thumbnail:i,videoSize:a.metadata.dimensions,videoID:a.metadata.fbid,videoURI:a.url})})},constructStickerComponent:function(a,c,d,e,f,g){e=e?"chatScrolled/":"messengerScrolled/";e+=a.thread_id;if(!c){c=b("MessengerHotLikeUtils").getMetadataForHotLike(a.sticker_id);if(!c){var i={},j={height:b("StickerConstants").THREAD_SIZE,width:b("StickerConstants").THREAD_SIZE},k=j.height;j=j.width;i.height=k;i.width=j;i.stickerID=a.sticker_id;i.spriteURI="";i.spriteURI2x="";i.paddedSpriteURI="";i.paddedSpriteURI2x="";c=i}}k=null;c.stickerID?k=c.stickerID.toString():a.sticker_id&&(k=a.sticker_id.toString());j=null;c.packID&&(j=c.packID.toString());i=b("XStickerAssetController").getURIBuilder().setInt("sticker_id",k);a=null;var l=null;window.devicePixelRatio&&window.devicePixelRatio>1?(l=c.paddedSpriteURI2x,a=c.spriteURI2x):(l=c.paddedSpriteURI,a=c.spriteURI);return h.jsx(b("Sticker.react"),{accessibilityLabel:c.accessibilityLabel,animationTrigger:"hover",customColor:g,frameCount:c.frameCount||1,frameRate:c.frameRate||83,framesPerCol:c.framesPerCol||1,framesPerRow:c.framesPerRow||1,onAttachmentLoad:f,onStickerClick:d,packID:j,paddedSpriteURI:l,sourceHeight:c.height,sourceURI:i.setEnum("image_type","BestEffortImage").getURI().toString(),sourceWidth:c.width,spriteURI:a,stickerID:k,subscribedThreadID:e,testID:"sticker"})},constructEmojiLikeAttachment:function(a,c,d){a=b("MessengerSupportedEmojiUtils").getHotLikeEmojiData(c.body,a.size)||b("MessengerSupportedEmojiUtils").getHotLikeEmojiDataTransition(c.body,a.size);if(!a)return null;a=a.emoji;return h.jsx(b("EmojiSticker.react"),{className:"_2poz _ui9",emoji:c.body,emojiImage:a,sourceURI:"",onAttachmentLoad:d},"sticker:"+c.message_id)},renderPhotoAttachments:function(a,c,d,e){var f=a.length;if(!f)return null;var g=c&&c.thread_fbid;c&&!g&&(b("MercuryIDs").isLocalThread(c.thread_id)?null:b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id));if(f===1){g=a[0];f=b("MercuryAttachment").resizeContain({width:d-i,height:d},{width:g.preview_width,height:g.preview_height});return h.jsxs("div",{className:"_55pk _59go"+(b("MercuryAttachment").hasAttribution(g)?" _4yjw":""),children:[h.jsx(b("MercuryAttachmentPhoto.react"),{image:g,width:f.width,hasAttribution:b("MercuryAttachment").hasAttribution(g),height:f.height,photoEncodings:g.photo_encodings,message:c,onAttachmentLoad:e,round:!0}),h.jsx(b("ChatAttachmentAttribution.react"),{attachment:new(b("ImmutableObject"))(a[0])})]})}return h.jsx("div",{className:"_55pk",children:h.jsx(b("MercuryAttachmentPhotoGrid.react"),{images:a,size:d-i,message:c})})},sortAttachmentsStablyByType:function(a){var c,d=[(c=b("MercuryAttachment")).isEmojiLikeAttachment,c.isPhotoAttachment,c.isShareAttachment,c.isFileAttachment,c.isErrorAttachment];d.push(function(a){return!0});var e=d.map(function(a){return[]});a.forEach(function(a){for(var b=0;b<d.length;b++)if(d[b](a)){e[b].push(a);break}});return Array.prototype.concat.apply([],e)},constructStoryBasedShareAttachment:function(a,c,d,e,f,g){var i,j,k,l=b("MercuryShareAttachmentRenderLocations").CHAT,m=c.share&&c.share.style_list&&c.share.style_list[0]==="cultural_moment_holiday_card",n=b("MercuryAttachmentLayoutTypeHelper").isAdminType(c)?{maxWidth:260}:{maxWidth:e},o=null;a&&a.platform_xmd&&(o=JSON.parse(a.platform_xmd));k=(k=c)!=null?(k=k.share)!=null?(k=k.messenger_ctas)!=null?(k=k[0])!=null?k.page_id:k:k:k:k;j=(j=c)!=null?(j=j.share)!=null?(j=j.target)!=null?(j=j.items)!=null?(j=j[0])!=null?(j=j.call_to_actions)!=null?(j=j[0])!=null?j.page_id:j:j:j:j:j:j:j;k=k||j;j=k?b("MercuryIDs").getParticipantIDFromUserID(k):a.author;k=b("MessengerFromViewerUtils").isFromViewer(a);i=((i=c)!=null?(i=i.share)!=null?(i=i.style_list)!=null?i[0]:i:i:i)==="montage_direct";var p=b("gkx")("1019832")&&(c==null?void 0:c.share.style_list[0])==="montage_share";return h.jsx("div",{className:"_3_om"+(d&&!m&&!i&&!p?" _3cpq":""),style:n,children:h.jsx(b("MercuryShareAttachment.react"),{attachment:c.share,isFromViewer:k,isSponsored:a.is_sponsored,isVisible:g,location:l,maxWidth:e,messageID:a.message_id,mnMessageType:o&&o.template_type,onComponentLoaded:f,pageID:j,threadID:a.thread_id,timestamp:a.timestamp,author:a.author})})}};e.exports=a}),null);
__d("MercuryAttachments.react",["cx","MercuryAttachment","MercuryAttachmentError.react","MercuryAttachmentMalicious.react","MercuryAttachmentRenderer","MessengerHotLikePreview.react","React","SubscriptionsHandler","emptyFunction","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.props.onAttachmentLoad&&c.props.onAttachmentLoad(a)},c.$2=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$2=new(b("SubscriptionsHandler"))()};d.componentWillUnmount=function(){this.$2&&this.$2.release()};d.$3=function(a){if(b("MercuryAttachment").isStickerAttachment(a))return b("MercuryAttachmentRenderer").constructStickerComponent(this.props.message,this.props.attachments[0].metadata,this.props.onStickerClick,this.props.isChat,this.$1,this.props.customColor);else if(b("MercuryAttachment").isEmojiLikeAttachment(a)){var c=b("MercuryAttachmentRenderer").constructEmojiLikeAttachment(a,this.props.message,this.$1);return c?c:h.jsx(b("MercuryAttachmentError.react"),{})}else if(b("MercuryAttachment").isVoiceAttachment(a))return b("MercuryAttachmentRenderer").renderAudioClip(this.props.attachments[0],this.props.isChat,this.props.customColor,this.props.message,this.$1);else if(b("MercuryAttachment").isVideoAttachment(a))return b("MercuryAttachmentRenderer").renderVideo(a,this.props.isChat,this.props.message,this.$1,this.props.isVisible);else if(b("MercuryAttachment").isShareAttachment(a))return b("MercuryAttachmentRenderer").constructStoryBasedShareAttachment(this.props.message,a,this.props.isChat,this.props.maxWidth,this.$1,this.props.isVisible);else if(b("MercuryAttachment").isFileAttachment(a))return b("MercuryAttachmentRenderer").renderFile(a,this.props.isChat,this.$1);else if(b("MercuryAttachment").isErrorAttachment(a))return h.jsx(b("MercuryAttachmentError.react"),{});return h.jsx(b("MercuryAttachmentMalicious.react"),{})};d.render=function(){var a=this;if(this.props.message.is_like_preview)return h.jsx(b("MessengerHotLikePreview.react"),{forGameChat:this.props.forGameChat,isChat:this.props.isChat,since:this.props.message.like_preview_since,customLike:this.props.message.customLike,customColor:this.props.customColor},"hlp:"+this.props.message.like_preview_since);if(this.props.attachments.length===0)return h.jsx("div",babelHelpers["extends"]({},this.props));if(this.props.message.commerce_message_type==="ride_intent")return h.jsx("div",babelHelpers["extends"]({},this.props));var c=b("MercuryAttachmentRenderer").renderPhotoAttachments(this.props.attachments.filter(b("MercuryAttachment").isPhotoAttachment),this.props.message,this.props.maxWidth,this.$1),d=b("MercuryAttachmentRenderer").sortAttachmentsStablyByType(this.props.attachments.filter(function(a){return!b("MercuryAttachment").isPhotoAttachment(a)})).map(function(b,c){return h.jsx("span",{children:a.$3(b)},c)});return h.jsxs("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,d.length>0?"_6dm2":""),"data-testid":void 0,children:[c,d,this.props.articleContextTrigger,this.props.afterDecorators,this.props.renderProgressBar&&this.props.renderProgressBar(),this.props.attachments.every(function(a){return!b("MercuryAttachment").isShareAttachment(a)})?this.props.innerDecorators:null]}))};return c}(h.Component);a.propTypes={afterDecorators:(c=b("prop-types")).arrayOf(c.element),attachments:c.array.isRequired,className:c.string,customColor:c.string,customLike:c.object,forGameChat:c.bool,maxWidth:c.number.isRequired,message:c.object.isRequired,isChat:c.bool,isVisible:c.bool,onAttachmentLoad:c.func,onStickerClick:c.func,onUnwrap:c.func,innerDecorators:c.element,articleContextTrigger:c.element};a.defaultProps={isChat:!1,onAttachmentLoad:b("emptyFunction"),onStickerClick:b("emptyFunction")};e.exports=a}),null);